
! function(e) {
    

    let childWin;
    

    function o(o) {
        switch (String.fromCharCode(o.which).toLowerCase()) {
            case "s":
                o.preventDefault(), angular.element("#ct-controller-ui").scope().iframeScope.savePage();
               
                if (!childWin) {
                    console.log("No LS instance");
                } else {
                    childWin.location.reload();
                }
                break;
        }
    }
    e(window).bind("keydown", function(e) {
        (e.ctrlKey || e.metaKey) && o(e)
    }), e(document).ready(function() {
        e("#ct-artificial-viewport").load(function() {
            e(this).contents().bind("keydown", function(e) {
                (e.ctrlKey || e.metaKey) && o(e)
            })
        })
    });

        let t = "",
        a = '<a  style="display:none;"  id="tf-fronted-child" ng-href="{{' + (t = 1 == tbfLocalVars.istemplate ? "iframeScope.template.postData.frontendURL" : "iframeScope.ajaxVar.frontendURL") + '}}" target="_blank" style="text-decoration:none;" title="Open in Front End"> <div class="oxygen-back-to-frontend oxygen-dom-tree-button oxygen-toolbar-button"></div></a>';
   
        e("#oxygen-topbar .oxygen-dom-tree-button.oxygen-toolbar-button").before(a); 
   
        let n = tbfLocalVars.siteURL,
        r = '<a class="oxygen-toolbar-button-dropdown-option" ng-href="' + n + '/wp-admin/edit.php?post_type=ct_template" href="' + n + '/edit.php?post_type=ct_template">Templates</a><a class="oxygen-toolbar-button-dropdown-option" ng-href="' + n + '/wp-admin/edit.php" href="' + n + '/edit.php">Posts</a><a class="oxygen-toolbar-button-dropdown-option" ng-href="' + n + '/wp-admin/edit.php?post_type=page" href="' + n + '/edit.php?post_type=page">Pages</a><a class="oxygen-toolbar-button-dropdown-option" ng-href="' + n + '/wp-admin/upload.php" href="' + n + '/upload.php">Media</a>';
   
        e("#oxygen-topbar .oxygen-back-to-wp-menu .oxygen-toolbar-button-dropdown").prepend(r), e(".oxygen-back-to-wp-menu .oxygen-toolbar-button-dropdown-option:last-child").remove(); 
    
        
    jQuery(document).ready(function() {
        console.log("main-ready");
        e(".oxygen-select.oxygen-media-query-box-wrapper").insertAfter(".oxygen-add-button.oxygen-toolbar-button");
    
        const o = angular.element("#ct-controller-ui").scope();
        
        e("#tbf-s1").click(function() {
            console.log("LS click");
            let t = "",
            liveServerLocation = '' + (t = 1 == tbfLocalVars.istemplate ? angular.element("#ct-controller-ui").scope().iframeScope.template.postData.frontendURL : angular.element("#ct-controller-ui").scope().iframeScope.ajaxVar.frontendURL);
            childWin = window.open(liveServerLocation, "_blank", "width=500,height=500");       
        })
        
        e(".oxygen-save-button.oxygen-toolbar-button").click(function() {
            console.log("LS-rf click");
            if (!childWin) {
                console.log("No LS instance");
            } else {
                childWin.location.reload();
            }    
        })

        e("#tbf-s2").click(function() {
            if (!childWin) {
                alert("There is no child window open.");
            } else {
                childWin.location.reload();
            }
        })

        e('#oxygen-sidebar .oxygen-active-element-name').dblclick(function() {
            angular.element("#ct-controller-ui").scope().iframeScope.setEditableFriendlyName(angular.element("#ct-controller-ui").scope().iframeScope.component.active.id);
        })
     
        e(".oxygen-add-section-accordion").click(function() {
            o.iframeScope.designSetSubTab = 0
        })

    });


           


}(jQuery);